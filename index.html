<!DOCTYPE html>
<html>
<head>
  <title>Live Object Detection (Full Screen)</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.6.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
  <style>
    body, html {
      margin: 0;
      overflow: hidden;
      background: black;
    }
    video, canvas {
      position: absolute;
      top: 0;
      left: 0;
      object-fit: cover;
      width: 100vw;
      height: 100vh;
    }
  </style>
</head>
<body>

<video id="webcam" autoplay playsinline muted></video>
<canvas id="overlay"></canvas>

<script>
  const video = document.getElementById('webcam');
  const canvas = document.getElementById('overlay');
  const ctx = canvas.getContext('2d');

  async function setupCamera() {
    const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
    video.srcObject = stream;
    return new Promise(resolve => {
      video.onloadedmetadata = () => {
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        resolve();
      };
    });
  }

  async function main() {
    await setupCamera();
    const model = await cocoSsd.load();
    
    async function detect() {
      const predictions = await model.detect(video);
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      predictions.forEach(pred => {
        ctx.beginPath();
        ctx.rect(...pred.bbox);
        ctx.lineWidth = 2;
        ctx.strokeStyle = 'lime';
        ctx.fillStyle = 'lime';
        ctx.stroke();
        ctx.font = '16px sans-serif';
        ctx.fillText(pred.class, pred.bbox[0], pred.bbox[1] > 20 ? pred.bbox[1] - 5 : 10);
      });

      requestAnimationFrame(detect);
    }

    detect();
  }

  main();
</script>

</body>
</html>
